(function(){function a(...a){k&&console.log("[WPO IPS Peppol]",...a)}function b(a){const b=document.querySelector(a);return b?((b.value||"")+"").trim():""}function c(){const a=b(l).toUpperCase();return j.includes(a)}function d(){if(!document.getElementById("wpo-ips-peppol-lock-styles")){const a=document.createElement("style");a.id="wpo-ips-peppol-lock-styles",a.textContent=`
			/* Locked look */
			.wpo-is-locked {
				opacity: 0.75;
				cursor: not-allowed;
			}

			/* Make wrapper look disabled (Blocks uses wrapper divs) */
			.wpo-ips-locked-wrap {
				opacity: 0.75;
			}
			.wpo-ips-locked-wrap input {
				background: rgba(0,0,0,0.04);
			}

			/* Override link */
			.wpo-ips-override {
				display: block;
				margin-top: 6px;
				font-size: 12px;
				text-decoration: underline;
				cursor: pointer;
				user-select: none;
			}
			.wpo-ips-override:hover {
				text-decoration: none;
			}
		`,document.head.appendChild(a)}}function e(a,b,c){if(!a)return;let d=a.querySelector(".wpo-ips-override");return c?d?d:(d=document.createElement("a"),d.href="#",d.className="wpo-ips-override",d.textContent=i.override_link_text||"Unlock",d.addEventListener("click",a=>{a.preventDefault(),p=!0,g("override-click"),b&&b.focus()}),a.appendChild(d),d):void(d&&d.remove())}function f(a,b,c){a.readOnly=c,a.style.pointerEvents=c?"none":"",a.setAttribute("aria-disabled",c?"true":"false"),a.classList.toggle("wpo-is-locked",c),b&&b.classList.toggle("wpo-ips-locked-wrap",c)}function g(g="unknown"){u=!1,d();const h=document.querySelector(n),i=document.querySelector(o);if(!i)return;const j=b(l).toUpperCase(),k=b(m);(j!==r||k!==q)&&(p=!1,r=j,q=k);const v=c()&&""!==k,w=v&&!p;w===s&&i===t||(e(h,i,w),f(i,h,w),s=w,t=i,a("lock state applied",{source:g,country:j,vatValue:k,locked:w,manualOverride:p}))}function h(a){u||(u=!0,requestAnimationFrame(()=>g(a)))}const i=window.wpoIpsPeppol||{},j=Array.isArray(i.countries)?i.countries.map(a=>(a+"").toUpperCase()):[],k=!!i.debug,l="#billing-country, select[name=\"billing_country\"]",m=i.vat_field_selector,n=".wc-block-components-address-form__wpo-ips-edi-peppol-endpoint-id",o=n+" input";let p=!1,q=null,r=null,s=null,t=null,u=!1;const v=document.querySelector("#order-fields")||document.querySelector(".wc-block-checkout")||document.documentElement;new MutationObserver(()=>h("mutation")).observe(v,{childList:!0,subtree:!0}),document.addEventListener("input",a=>{(a.target?.matches(l)||a.target?.matches(m))&&h("input")}),h("init")})();